{% extends "main/base.html" %}
{% load static %}

{% block css %}
    {# –ó–¥–µ—Å—å –Ω–∞–¥–æ –¥–æ–±–∞–≤–ª—è—Ç—å css —Å—Ç–∏–ª–∏#}
    <style>
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),
            url({% static "deps/images/—Ñ–æ–Ω_6.jpg" %}) center/cover no-repeat;
        }
    </style>
{% endblock %}



{% block content %}

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-text">
            <h1 class="display-4">–ó–¥–µ—Å—å —Ä–æ–∂–¥–∞—é—Ç—Å—è —Å–∞–º—ã–µ –∫—Ä—É—Ç—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</h1>
        </div>
    </section>

    <section class="search-panel py-4">
        <div class="container">
            <!-- –ü–µ—Ä–≤—ã–π –±–ª–æ–∫ -->
            <form method="post" id="travelForm" action="{% url 'survey:survey' %}">
                {% csrf_token %}
                <div class="search-block d-flex flex-wrap align-items-center mb-4">
                    <!-- –ö—É–¥–∞ -->
                    <div class="search-item">
                        <div class="d-flex align-items-center mb-3">
                            <select class="form-control" id="cityInput" name="city">
                                <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                                <option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞(–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</option>
                                <option value="–†—è–∑–∞–Ω—å">–†—è–∑–∞–Ω—å(–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</option>
                                <option value="–ö–∞–∑–∞–Ω—å">–ö–∞–∑–∞–Ω—å(–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</option>
                                <option value="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥(–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</option>
                            </select>
                        </div>
                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-sm btn-outline-primary" id="cityInputBtn">
                                –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
                            </button>
                        </div>
                    </div>

                    <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω -->
                    <div class="search-item">
                        <div class="d-flex align-items-center mb-3">
                            <input
                                    type="text"
                                    class="form-control form-control-sm me-2"
                                    id="personInput"
                                    value="1 —á–µ–ª–æ–≤–µ–∫"
                                    onfocus="clearInput()"
                                    oninput="updatePersonCount()"
                                    onblur="addPersonText()"
                                    style="width: 150px; text-align: center;"
                                    name="person_count"
                            />
                        </div>
                        <button type="button" class="btn btn-outline-primary" id="personInputBtn">2 —á–µ–ª–æ–≤–µ–∫–∞</button>
                    </div>


                    <!-- –ë—é–¥–∂–µ—Ç -->
                    <div class="search-item ">
                        <div class="d-flex align-items-center mb-3">
                            <div class="input-container" style="position: relative; width: 100%;">
                                <input
                                        type="number"
                                        class="form-control form-control-sm me-2"
                                        id="budgetInput"
                                        placeholder="–ë—é–¥–∂–µ—Ç"
                                        min="0"
                                        max="9999999999999"
                                        name="budget"
                                />
                                <span class="currency-symbol"
                                      style="position: absolute; right: 5px; top: 50%; transform: translateY(-50%);">‚ÇΩ</span>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-primary " id="budgetInputBtn">–ù–µ
                            —É–∫–∞–∑—ã–≤–∞—Ç—å
                        </button>
                    </div>
                </div>
                <!-- –í—Ç–æ—Ä–æ–π –±–ª–æ–∫ -->
                <div class="search-block d-flex flex-wrap">
                    <!-- –ö–æ–≥–¥–∞ -->
                    <div class="search-item">
                        <label class="form-label">–¢—É–¥–∞</label>
                        <input type="date" class="form-control" name="departure_date" required>
                    </div>

                    <!-- –û–±—Ä–∞—Ç–Ω–æ -->
                    <div class="search-item">
                        <label class="form-label">–û–±—Ä–∞—Ç–Ω–æ</label>
                        <input type="date" class="form-control" name="return_date" required>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ –ü–û–ï–•–ê–õ–ò –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
                <div class="text-center mt-4">
                    <button type="button" class="btn btn-primary btn-lg px-5" onclick="validateForm()">
                        –ü–û–ï–•–ê–õ–ò!
                    </button>
                </div>

                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
                <div class="modal fade" id="surveyModal" tabindex="-1" aria-labelledby="surveyModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="surveyModalLabel">–ü—Ä–æ–π–¥–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø—Ä–æ—Å</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <p>–ü—Ä–µ–∂–¥–µ —á–µ–º –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π - –ø—Ä–æ–π–¥–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø—Ä–æ—Å üôè</p>
                                <p>–¢–∞–∫ –Ω–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–º–æ–∂–µ—Ç –ø–æ–¥–æ–±—Ä–∞—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.</p>
                            </div>
                            <div class="modal-footer justify-content-center">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">–ù–µ
                                    —Å–µ–π—á–∞—Å
                                </button>
                                <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã -->
                                <button type="submit" form="travelForm" class="btn btn-primary">–ü—Ä–æ–π—Ç–∏ –æ–ø—Ä–æ—Å</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Destinations Section -->
    <section class="container my-5">
        <h3 class="mb-4">–ü–æ–¥–±–æ—Ä–∫–∏ –º–µ—Å—Ç</h3>
        <h5 class="text-primary mb-4">–•–æ—á—É –Ω–∞ —Å–µ–≤–µ—Ä</h5>

        <div class="row g-4">
            <!-- Saint Petersburg -->
            <div class="col-md-4">
                <div class="card destination-card h-100">
                    <img src={% static "deps/images/–ø–∏—Ç–µ—Ä.jpg" %} class="card-img-top"
                         alt="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥">
                    <div class="card-body">
                        <h5 class="card-title">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</h5>
                        <p class="card-text">–ë–µ–ª–∞—è –Ω–æ—á—å —Å–ø—É—Å—Ç–∏–ª–∞—Å—å –∫–∞–∫ –æ–±–ª–∞–∫–æ...</p>
                    </div>
                </div>
            </div>

            <!-- Arkhangelsk -->
            <div class="col-md-4">
                <div class="card destination-card h-100">
                    <img src={% static "deps/images/–∞—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫.jpg" %} class="card-img-top"
                         alt="–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫">
                    <div class="card-body">
                        <h5 class="card-title">–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫</h5>
                        <p class="card-text">–ó–¥–µ—Å—å –õ–æ–º–æ–Ω–æ—Å–æ–≤ –±—Ä–æ–¥–∏–ª</p>
                    </div>
                </div>
            </div>

            <!-- Murmansk -->
            <div class="col-md-4">
                <div class="card destination-card h-100">
                    <img src={% static "deps/images/–º—É—Ä–º–∞–Ω—Å–∫.jpg" %} class="card-img-top"
                         alt="–ú—É—Ä–º–∞–Ω—Å–∫">
                    <div class="card-body">
                        <h5 class="card-title">–ú—É—Ä–º–∞–Ω—Å–∫</h5>
                        <p class="card-text">–ï–¥–µ–º –∫—É—à–∞—Ç—å —Ä—ã–±—É!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
 <!-- –ö–∞—Å—Ç–æ–º–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
<div id="customAlert" class="custom-alert">
    <div class="custom-alert-content">
        <p id="customAlertMessage">–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
        <button class="btn btn-primary" onclick="closeCustomAlert()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>
    <!--–°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–µ–ª–æ–≤–µ–∫ -->
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã
    function validateForm() {
        const city = document.getElementById("cityInput").value;
        const personCount = document.getElementById("personInput").value;
        const budget = document.getElementById("budgetInput").value;
        const departureDate = document.querySelector("input[name='departure_date']").value;
        const returnDate = document.querySelector("input[name='return_date']").value;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ã–µ –ø–æ–ª—è
        if (!city || !personCount || !departureDate || !returnDate) {
            showCustomAlert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –ö—É–¥–∞, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫, –î–∞—Ç—ã '–¢—É–¥–∞' –∏ '–û–±—Ä–∞—Ç–Ω–æ'.");
            return; // –ü—Ä–µ—Ä—ã–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞—Ç
        const departureDateObj = new Date(departureDate);
        const returnDateObj = new Date(returnDate);

        if (returnDateObj < departureDateObj) {
            showCustomAlert("–î–∞—Ç–∞ '–û–±—Ä–∞—Ç–Ω–æ' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã '–¢—É–¥–∞'. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –¥–∞—Ç—É.");
            return; // –ü—Ä–µ—Ä—ã–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        }

        // –ï—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        let surveyModal = new bootstrap.Modal(document.getElementById('surveyModal'));
        surveyModal.show();
    }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ –ø–æ–ª–µ
        function clearInput() {
            let personInput = document.getElementById("personInput");

            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ, –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä—ã –∏ —Ç–µ–∫—Å—Ç–∞ "—á–µ–ª–æ–≤–µ–∫" –∏–ª–∏ "—á–µ–ª–æ–≤–µ–∫–∞"
            if (/^\d+ —á–µ–ª–æ–≤–µ–∫(–∞)?$/.test(personInput.value)) {
                personInput.value = personInput.value.replace(/\D/g, '');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ–∫–æ–Ω—á–∞–Ω–∏–µ–º
        function updatePersonCount() {
            let personInput = document.getElementById("personInput");

            // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
            personInput.value = personInput.value.replace(/\D/g, '');


        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ "—á–µ–ª–æ–≤–µ–∫"
        function addPersonText() {
            let personInput = document.getElementById("personInput");

            // –ü–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–æ –∏–∑ value
            let count = parseInt(personInput.value) || 1;

            // –ï—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ 1, —Ç–æ –ø–∏—à–µ–º "—á–µ–ª–æ–≤–µ–∫", –∏–Ω–∞—á–µ "—á–µ–ª–æ–≤–µ–∫–∞"
            if (count === 1 || count >= 5) {
                personInput.value = count + " —á–µ–ª–æ–≤–µ–∫";
            } else {
                personInput.value = count + " —á–µ–ª–æ–≤–µ–∫–∞";
            }
        }
    </script>
    <!--–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ -->
    <script>
        document.getElementById('cityInputBtn').addEventListener('click', function () {
            document.getElementById('cityInput').value = document.getElementById('cityInputBtn').innerText;  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
        });


        document.getElementById('budgetInputBtn').addEventListener('click', function () {
            document.getElementById('budgetInput').value = '';
            document.getElementById('budgetInput').placeholder = document.getElementById('budgetInputBtn').innerText;  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
        });

        document.getElementById('personInputBtn').addEventListener('click', function () {
            document.getElementById('personInput').value = document.getElementById('personInputBtn').innerText;  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
        });
        document.addEventListener("DOMContentLoaded", function () {
        const departureDateInput = document.querySelector("input[name='departure_date']");
        const returnDateInput = document.querySelector("input[name='return_date']");


    });
    </script>
    <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    function showCustomAlert(message) {
        document.getElementById("customAlertMessage").innerText = message;
        document.getElementById("customAlert").style.display = "flex";
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    function closeCustomAlert() {
        document.getElementById("customAlert").style.display = "none";
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º
    document.addEventListener("DOMContentLoaded", function () {
        const departureDateInput = document.querySelector("input[name='departure_date']");
        const returnDateInput = document.querySelector("input[name='return_date']");

        departureDateInput.addEventListener("change", validateDates);
        returnDateInput.addEventListener("change", validateDates);

        function validateDates() {
            const departureDate = new Date(departureDateInput.value);
            const returnDate = new Date(returnDateInput.value);

            if (returnDate < departureDate) {
                showCustomAlert("–î–∞—Ç–∞ '–û–±—Ä–∞—Ç–Ω–æ' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã '–¢—É–¥–∞'. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –¥–∞—Ç—É.");
                returnDateInput.value = ""; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ
            }
        }
    });
</script>
{% endblock %}


{% block footer %}

{% endblock %}



